# to do exist checks
#date check
#checks for which ones are at peace with eachother? not really necessary if GER is AI


country_event = {
	id = 500000
	title = "GCW title"
	desc = "This germany is not one of the playable germanies! it will get annexed at the conclusion of the GCW and also event spammed so please switch immediately!"

	trigger = {
		tag = GER
		OR = {
			AND = {
				exists = GGE
				exists = SGE
				exists = GER
				GGE = {NOT = {war_with = SGE}}
			}
			AND = {
				exists = GGE
				exists = HGE
				exists = GER
				GGE = {NOT = {war_with = HGE}}
			}
			AND = {
				exists = GGE
				exists = BGE
				exists = GER
				GGE = {NOT = {war_with = BGE}}
				GGE = {
					OR = {
						NOT = {has_country_flag = bge_peace}
						AND = {
							NOT = {exists = SGE}
							NOT = {exists = HGE}
						}
					}
				}
			}
			AND = {
				exists = BGE
				exists = HGE
				exists = GER
				BGE = {NOT = {war_with = HGE}}
			}
			AND = {
				exists = BGE
				exists = SGE
				exists = GER
				BGE = {NOT = {war_with = SGE}}
			}
			AND = {
				exists = SGE
				exists = HGE
				exists = GER
				SGE = {NOT = {war_with = HGE}}
			}
		}

	}
	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		any_country = {
			limit = {
				tag = GGE
				exists = GGE
				exists = HGE
			}
			war = {
				target = HGE
				attacker_goal = { casus_belli = civil_war }
				defender_goal = { casus_belli = civil_war }
				call_ally = no
			}
		}

		any_country = {
			limit = {
				tag = GGE
				exists = GGE
				exists = SGE
			}
			war = {
				target = SGE
				attacker_goal = { casus_belli = civil_war }
				defender_goal = { casus_belli = civil_war }
				call_ally = no
			}
		}

		any_country = {
			limit = {
				tag = GGE
				exists = GGE
				exists = BGE
				OR = {
					NOT = {has_country_flag = bge_peace}
					AND = {
						NOT = {exists = SGE}
						NOT = {exists = HGE}
					}
				}
				
				
			}
			war = {
				target = BGE
				attacker_goal = { casus_belli = civil_war }
				defender_goal = { casus_belli = civil_war }
				call_ally = no
			}
		}

		any_country = {
			limit = {
				tag = HGE
				exists = HGE
				exists = BGE
			}
			war = {
				target = BGE
				attacker_goal = { casus_belli = civil_war }
				defender_goal = { casus_belli = civil_war }
				call_ally = no
			}
		}

		any_country = {
			limit = {
				tag = HGE
				exists = HGE
				exists = SGE
			}
			war = {
				target = SGE
				attacker_goal = { casus_belli = civil_war }
				defender_goal = { casus_belli = civil_war }
				call_ally = no
			}
		}

		any_country = {
			limit = {
				tag = SGE
				exists = SGE
				exists = BGE
			}
			war = {
				target = BGE
				attacker_goal = { casus_belli = civil_war }
				defender_goal = { casus_belli = civil_war }
				call_ally = no
			}
		}
	}
	
	option = {
		name = "ok"
	}
}



country_event = {
	id = 500001
	title = "German civil war has concluded."
	desc = "Remaining puppets will now be transfered."

	is_triggered_only = yes

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		597 = {
			owner = {country_event = 500002}
		}
	}

	option = {
		name = "ok"
	}
}

country_event = {
	id = 500002
	title = "German civil war has concluded."
	desc = "Remaining puppets will now be transfered."

	is_triggered_only = yes
	allow_multiple_instances = yes
	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		create_vassal = FROM
		diplomatic_influence = {
			who = FROM
			value = 600
		}
	}

	option = {
		name = "ok"
	}
}




country_event = {
	id = 500030
	title = "Heydrich asks for aid!"
	desc = "Our close ally in the German civil war has approached and asked us for aid!"

	is_triggered_only = yes
	option = {
		name = "The time for invervention is nigh!"

		set_country_flag = refused_german_peace

		#should change these to defensive wars to prevent fuckery
		war = {
			target = BGE
			attacker_goal = { casus_belli = brg_gcw }
			call_ally = no
		}

		war = {
			target = GGE
			attacker_goal = { casus_belli = brg_gcw }
			call_ally = no
		}

		war = {
			target = SGE
			attacker_goal = { casus_belli = brg_gcw }
			call_ally = no
		}

		ai_chance = {
			factor = 0.10
			modifier = {
				factor = 0
				war = yes
			}
		}
	}

	option = {
		name = "Our assistance must be limited..."
		HGE = {
			add_country_modifier = {
				name = brg_assist
				duration = 1095
			}
			artillery = 200
			clipper_convoy = 200
			aeroplanes = 200
			fuel = 200
			small_arms = 100
			canned_food = 200
			ammunition = 200
			automobiles = 300
			#add other goods
		}

		ai_chance = {
			factor = 0.9
		}
	}
}


country_event = {
	id = 500031
	title = "Speer asks for aid!"
	desc = "Speer has requested our assistance in the German civil war; he promises freedom in exchange!"

	is_triggered_only = yes
	option = {
		name = "The time for invervention is nigh!"
		neutrality = yes #might be a tad unneccesary
		set_country_flag = refused_german_peace
		set_country_flag = serve_for_freedom

		release_vassal = THIS
		SGE = {
			diplomatic_influence = {
				who = THIS
				value = 800
			}
		}
		create_alliance = SGE

		#BGE = {
			war = {
				target = BGE
				attacker_goal = { casus_belli = pup_gcw }
				call_ally = no
			}
		#}

		#GGE = {
			war = {
				target = GGE
				attacker_goal = { casus_belli = pup_gcw }
				call_ally = no
			}
		#}

		#HGE = {
			war = {
				target = HGE
				attacker_goal = { casus_belli = pup_gcw }
				call_ally = no
			}
		#}

		ai_chance = {
			factor = 0.25
			modifier = {
				factor = 0
				any_owned_province = {
					controlled_by = REB
				}
			}
			modifier = {
				factor = 0
				OR = {
					tag = UKR
					tag = MSC
				}
			}
		}
	}

	option = {
		name = "It's a trap!"

		ai_chance = {
			factor = 0.75
		}
	}
}

country_event = {
	id = 500032
	title = "Freedom in the east!"
	desc = "The German civil war is won and it is high time we full our promises of freedom to all who aided us."

	trigger = {
		tag = SGE
		OR = {
			POL = {has_country_flag = serve_for_freedom}
			MSC = {has_country_flag = serve_for_freedom}
			BOH = {has_country_flag = serve_for_freedom}
			UKR = {has_country_flag = serve_for_freedom}		
			BLT = {has_country_flag = serve_for_freedom}
		}
		NOT = {exists = GER}
		NOT = {has_country_flag = sff_reward}
	}

	mean_time_to_happen = {
		days = 15
	}

	immediate = {
		set_country_flag = sff_reward
	}

	option = {
		name = "A necessary commitment."

		any_country = {
			limit = {
				has_country_flag = serve_for_freedom
				tag = POL
			}
			#transfer cores and secede provinces
			717 = {
				add_core = POL
				secede_province = POL
				remove_core = SGE
			}
			712 = {
				add_core = POL
				secede_province = POL
				remove_core = SGE
			}
			710 = {
				add_core = POL
				secede_province = POL
				remove_core = SGE
			}

			706 = {
				add_core = POL
				secede_province = POL
				remove_core = SGE
			}
			708 = {
				add_core = POL
				secede_province = POL
				remove_core = SGE
			}
			709 = {
				add_core = POL
				secede_province = POL
				remove_core = SGE
			}
			707 = {
				add_core = POL
				secede_province = POL
				remove_core = SGE
			}
		}
		
		any_country = {
			limit = {
				has_country_flag = serve_for_freedom
				tag = BOH
			}
			SGE = {
				any_owned = {
					limit = {is_core = CZH}
					secede_province = BOH
					remove_core = SGE
				}
			}
			inherit = SLV
			change_tag = CZH
		}
		

		ai_chance = {
			factor = 0.9
		}
	}

	option = {
		name = "Those fools were unwise to trust us!"
		#add cbs
		badboy = 20
		ai_chance = {
			factor = 0.1
		}
	}
}

country_event = {
	id = 500037
	title = "bye lol"
	desc = ""
	is_triggered_only = yes

	immediate = {
		HGE = {inherit = THIS}
	}
	option = {
		name = "oh well"
	}
}

country_event = {
	id = 500038
	title = "bye lol"
	desc = ""
	is_triggered_only = yes

	immediate = {
		SGE = {inherit = THIS}
	}
	option = {
		name = "oh well"
	}
}

country_event = {
	id = 500039
	title = "Bormann has proposed a truce!"
	desc = "With the intervention of the rest of the German sphere there is now no reason for us to not set aside our differences and work together for now. Bormann has proposed that we cease our hostilities until Speer and Heydrich are dealt with."
	is_triggered_only = yes

	option = {
		name = "It is the only way."
		end_war = BGE
		set_country_flag = bge_peace
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 3
				war_with = BRG
			}
			modifier = {
				factor = 1.5
				OR = {
					war_with = BLT
					war_with = BOH
					war_with = POL
					war_with = UKR
					war_with = MSC
				}
				
			}
		}
	}


	option = {
		name = "Idiotic!"
		ai_chance = {
			factor = 0.5
		}
	}
}

country_event = {
	id = 500150
	title = "We've lost the German civil war!"
	desc = "We're fully occupied but no individual can reach 100 warscore. This event will split our country among the siegers."
	trigger = {
		OR = {
			AND = {
				tag = HGE
				NOT = {
					any_owned_province = {
						NOT = {
							OR = {
								controlled_by = GGE
								controlled_by = BGE
								controlled_by = SGE
							}
						}
					}
				}
			}
			AND = {
				tag = GGE
				NOT = {
					any_owned_province = {
						NOT = {
							OR = {
								controlled_by = HGE
								controlled_by = BGE
								controlled_by = SGE
							}
						}
					}
				}
			}
			AND = {
				tag = BGE
				NOT = {
					any_owned_province = {
						NOT = {
							OR = {
								controlled_by = GGE
								controlled_by = HGE
								controlled_by = SGE
							}
						}
					}
				}
			}
			AND = {
				tag = SGE
				NOT = {
					any_owned_province = {
						NOT = {
							OR = {
								controlled_by = GGE
								controlled_by = BGE
								controlled_by = HGE
							}
						}
					}
				}
			}
		}
		exists = GER
		
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		any_country = {
			limit = {
				NOT = {tag = THIS}
				OR = {
					tag = GGE
					tag = HGE
					tag = SGE
					tag = BGE
				}
			}
			country_event = 500151
		}
	}


	option = {
		name = "Great!"
	}
}

country_event = {
	id = 500151
	title = "We've partitioned another German state."
	desc = "Someone is fully occupied but no individual can reach 100 warscore. This event will split their country among the siegers."

	is_triggered_only = yes
	
	immediate = {
		FROM = {
			any_owned = {
				limit = {
					controlled_by = THIS
				}
				secede_province = THIS
			}
		}
		
		
	}

	option = {
		name = "Ok."
	}
}

country_event = {
	id = 500152
	title = "ghost war cleanup"
	desc = "on the tin"
	trigger = {
		tag = GER
		OR = {
			AND = {
				GGE = {
					NOT = {exists = yes}
					war = yes
				}
			}
			AND = {
				SGE = {
					NOT = {exists = yes}
					war = yes
				}
			}
			AND = {
				HGE = {
					NOT = {exists = yes}
					war = yes
				}
			}
			AND = {
				BGE = {
					NOT = {exists = yes}
					war = yes
				}
			}
		}
	}
	mean_time_to_happen = {
		days = 1
	}
	immediate = {
		any_country = {
			limit = {
				GGE = {
					NOT = {exists = yes}
					war = yes
				}
			}
			end_war = GGE
		}
		any_country = {
			limit = {
				HGE = {
					NOT = {exists = yes}
					war = yes
				}
			}
			end_war = HGE
		}
		any_country = {
			limit = {
				BGE = {
					NOT = {exists = yes}
					war = yes
				}
			}
			end_war = BGE
		}
		any_country = {
			limit = {
				SGE = {
					NOT = {exists = yes}
					war = yes
				}
			}
			end_war = SGE
		}
	}
	option = {
		name = "ok..."
	}
}


country_event = {
	id = 500006
	title = "German Ultimatum!"
	desc = "event500006desc"

	
	trigger = {
		exists = GER
		NOT = {has_country_flag = refused_german_peace}
		OR = {
			war_with = GGE
			war_with = HGE
			war_with = SGE
			war_with = BGE
		}
		NOT = {
			OR = {
				tag = GGE
				tag = HGE 
				tag = SGE
				tag = BGE
			}
		}
	}
	mean_time_to_happen = {
		days = 1
	}

	

	option = {
		name = "Let them kill eachother without us!"
		end_war = GGE
		end_war = HGE
		end_war = SGE
		end_war = BGE
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = "In for a penny, in for a pound!"
		set_country_flag = refused_german_peace

		HGE = {
			country_event = {id = 500029 days = 1} 
		}
		GGE = {
			country_event = {id = 500029 days = 1} 
		}
		BGE = {
			country_event = {id = 500029 days = 1} 
		}
		SGE = {
			country_event = {id = 500029 days = 1} 
		}
		
		ai_chance = {
			factor = 0
		}
	}
}

country_event = {
	id = 500029
	title = "Foreign nation invervenes in the German civil war!"
	desc = "event500029desc"
	is_triggered_only = yes
	allow_multiple_instances = yes

	option = {
		name = "We will crush them in the battlefield!"
		ai_chance = {
			factor = 0
		}
	}

	option = {
		name = "Let them feel the wrath of the National Socialist atomic power!"
		add_country_modifier = {
			name = nuclear_countdown
			duration = 180
		}
		set_country_flag = trying_to_nuke
		set_country_flag = german_nuke
		ai_chance = {
			
			factor = 1
		}
	}
}


country_event = {
	#launch event
	id = 500256
	title = "Nuclear Launch!"
	desc = "event500244desc"

	major = yes

	mean_time_to_happen = {
		days = 1
	}
	trigger = {
		has_country_flag = trying_to_nuke
		has_country_flag = german_nuke
		NOT = {has_country_modifier = nuclear_countdown}
		NOT = {has_global_flag = nuke_in_progress}
		war = yes
	}

	immediate = {
		set_global_flag = nuke_in_progress
		clr_country_flag = trying_to_nuke
		clr_country_flag = german_nuke

		#owned nuke finder
		any_owned = {
			limit = {
				is_capital = yes
				owner = {
					has_country_flag = primary_nukes
					NOT = {national_provinces_occupied = 0.5}
				}
			}
			set_global_flag = hit_global_nukes
		}
		any_owned = {
			limit = {
				is_capital = yes
				owner = {
					has_country_flag = primary_nukes
					NOT = {national_provinces_occupied = 0.5}
					any_owned_province = {
						continent = europe
					}
				}
			}
			set_global_flag = primary_europe
		}
		any_owned = {
			limit = {
				is_capital = yes
				owner = {
					has_country_flag = primary_nukes
					NOT = {national_provinces_occupied = 0.5}
					any_owned_province = {
						continent = asia
					}
				}
			}
			set_global_flag = primary_asia
		}
		any_owned = {
			limit = {
				is_capital = yes
				owner = {
					has_country_flag = primary_nukes
					NOT = {national_provinces_occupied = 0.5}
					any_owned_province = {
						continent = middle_east
					}
				}
			}
			set_global_flag = primary_middle_east
		}
		any_owned = {
			limit = {
				is_capital = yes
				owner = {
					has_country_flag = primary_nukes
					NOT = {national_provinces_occupied = 0.5}
					any_owned_province = {
						continent = central_asia
					}
				}
			}
			set_global_flag = primary_central_asia
		}
		any_owned = {
			limit = {
				is_capital = yes
				owner = {
					has_country_flag = primary_nukes
					NOT = {national_provinces_occupied = 0.5}
					any_owned_province = {
						continent = africa
					}
				}
			}
			set_global_flag = primary_africa
		}
		any_owned = {
			limit = {
				is_capital = yes
				owner = {
					has_country_flag = primary_nukes
					NOT = {national_provinces_occupied = 0.5}
					any_owned_province = {
						continent = north_america
					}
				}
			}
			set_global_flag = primary_north_america
		}
		any_owned = {
			limit = {
				is_capital = yes
				owner = {
					has_country_flag = primary_nukes
					NOT = {national_provinces_occupied = 0.5}
					any_owned_province = {
						continent = south_america
					}
				}
			}
			set_global_flag = primary_south_america
		}
		any_owned = {
			limit = {
				is_capital = yes
				owner = {
					has_country_flag = primary_nukes
					NOT = {national_provinces_occupied = 0.5}
					any_owned_province = {
						continent = oceania
					}
				}
			}
			set_global_flag = primary_oceania
		}
		any_owned = {
			limit = {
				is_capital = yes
				owner = {
					has_country_flag = primary_nukes
					NOT = {national_provinces_occupied = 0.5}
					any_owned_province = {
						continent = russia_anarchy
					}
				}
			}
			set_global_flag = primary_russia_anarchy
		}

		#primary_nuke finder
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = europe
				}
				has_country_flag = primary_nukes
			}
			set_global_flag = primary_europe
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = asia
				}
				has_country_flag = primary_nukes
			}
			set_global_flag = primary_asia
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = middle_east
				}
				has_country_flag = primary_nukes
			}
			set_global_flag = primary_middle_east
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = central_asia
				}
				has_country_flag = primary_nukes
			}
			set_global_flag = primary_central_asia
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = africa
				}
				has_country_flag = primary_nukes
			}
			set_global_flag = primary_africa
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = north_america
				}
				has_country_flag = primary_nukes
			}
			set_global_flag = primary_north_america
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = south_america
				}
				has_country_flag = primary_nukes
			}
			set_global_flag = primary_south_america
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = oceania
				}
				has_country_flag = primary_nukes
			}
			set_global_flag = primary_oceania
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = russia_anarchy
				}
				has_country_flag = primary_nukes
			}
			set_global_flag = primary_russia_anarchy
		}

		#secondary_nukes finder
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = europe
				}
				has_country_flag = secondary_nukes
			}
			set_global_flag = secondary_europe
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = asia
				}
				has_country_flag = secondary_nukes
			}
			set_global_flag = secondary_asia
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = middle_east
				}
				has_country_flag = secondary_nukes
			}
			set_global_flag = secondary_middle_east
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = central_asia
				}
				has_country_flag = secondary_nukes
			}
			set_global_flag = secondary_central_asia
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = africa
				}
				has_country_flag = secondary_nukes
			}
			set_global_flag = secondary_africa
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = north_america
				}
				has_country_flag = secondary_nukes
			}
			set_global_flag = secondary_north_america
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = south_america
				}
				has_country_flag = secondary_nukes
			}
			set_global_flag = secondary_south_america
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = oceania
				}
				has_country_flag = secondary_nukes
			}
			set_global_flag = secondary_oceania
		}
		any_country = {
			limit = {
				NOT = {national_provinces_occupied = 0.5}
				OR = {
					in_sphere = THIS
					tag = THIS
				}
				any_owned_province = {
					continent = russia_anarchy
				}
				has_country_flag = secondary_nukes
			}
			set_global_flag = secondary_russia_anarchy
		}

		#enemy sphere finder
		any_country = {
			limit = {
				is_greater_power = yes
				war_with = THIS
				NOT = {tag = REB}
				NOT = {tag = SGE}
				NOT = {tag = HGE}
				NOT = {tag = BGE}
				NOT = {tag = GGE}
			}
			set_country_flag = enemy_leader
		}
		any_country = {
			limit = {
				is_greater_power = no
				part_of_sphere = yes
				war_with = THIS
				NOT = {sphere_owner = {tag = REB}}
				NOT = {sphere_owner = {tag = HGE}}
				NOT = {sphere_owner = {tag = GGE}}
				NOT = {sphere_owner = {tag = BGE}}
				NOT = {sphere_owner = {tag = SGE}}
			}
			sphere_owner = {set_country_flag = enemy_leader}
		}
		any_country = {
			limit = {
				part_of_sphere = yes
				sphere_owner = {has_country_flag = enemy_leader}
				NOT = {tag = SGE}
				NOT = {tag = HGE}
				NOT = {tag = BGE}
				NOT = {tag = GGE}
			}
			set_country_flag = enemy_sphere
		}
		any_country = {
			limit = {
				is_greater_power = no
				part_of_sphere = no
				war_with = THIS
				NOT = {tag = REB}
				NOT = {tag = SGE}
				NOT = {tag = HGE}
				NOT = {tag = BGE}
				NOT = {tag = GGE}
			}
			set_country_flag = enemy_solo
		}

		#nuking effect
		any_country = {
			limit = {
				OR = {
					has_country_flag = enemy_leader
					has_country_flag = enemy_sphere
					has_country_flag = enemy_solo
				}
			}

			#global nuke
			any_owned = {
				limit = {
					total_pops = 100000
					has_province_modifier = nuke_light_2
					has_global_flag = hit_global_nukes
				}
				#nuke light
				set_province_flag = disease

				remove_province_modifier = nuke_light_3
				remove_province_modifier = nuke_light_2
				add_province_modifier = {
					name = nuke_light_3
					duration = 3650
				}
				add_province_modifier = {
					name = nuke_light_2
					duration = 3650
				}
			}
			any_owned = {
				limit = {
					total_pops = 100000
					has_province_modifier = nuke_light_1
					has_global_flag = hit_global_nukes
				}
				#nuke light
				set_province_flag = disease

				remove_province_modifier = nuke_light_2
				add_province_modifier = {
					name = nuke_light_2
					duration = 3650
				}
			}
			any_owned = {
				limit = {
					total_pops = 100000
					has_global_flag = hit_global_nukes
				}
				#nuke light
				set_province_flag = disease

				remove_province_modifier = nuke_light_1
				add_province_modifier = {
					name = nuke_light_1
					duration = 3650
				}
			}

			#primary same continent
			any_owned = {
				limit = {
					total_pops = 100000
					has_province_modifier = nuke_heavy_2
					OR = {
						AND = {
							continent = europe
							has_global_flag = primary_europe
						}
						AND = {
							continent = asia
							has_global_flag = primary_asia
						}
						AND = {
							continent = middle_east
							has_global_flag = primary_middle_east
						}
						AND = {
							continent = central_asia
							has_global_flag = primary_central_asia
						}
						AND = {
							continent = africa
							has_global_flag = primary_africa
						}
						AND = {
							continent = north_america
							has_global_flag = primary_north_america
						}
						AND = {
							continent = south_america
							has_global_flag = primary_south_america
						}
						AND = {
							continent = oceania
							has_global_flag = primary_oceania
						}
						AND = {
							continent = russia_anarchy
							has_global_flag = primary_russia_anarchy
						}
					}
				}
				#nuke heavy
				set_province_flag = disease

				remove_province_modifier = nuke_heavy_3
				remove_province_modifier = nuke_heavy_2
				add_province_modifier = {
					name = nuke_heavy_3
					duration = 3650
				}
				add_province_modifier = {
					name = nuke_heavy_2
					duration = 3650
				}
			}
			any_owned = {
				limit = {
					total_pops = 100000
					has_province_modifier = nuke_heavy_1
					OR = {
						AND = {
							continent = europe
							has_global_flag = primary_europe
						}
						AND = {
							continent = asia
							has_global_flag = primary_asia
						}
						AND = {
							continent = middle_east
							has_global_flag = primary_middle_east
						}
						AND = {
							continent = central_asia
							has_global_flag = primary_central_asia
						}
						AND = {
							continent = africa
							has_global_flag = primary_africa
						}
						AND = {
							continent = north_america
							has_global_flag = primary_north_america
						}
						AND = {
							continent = south_america
							has_global_flag = primary_south_america
						}
						AND = {
							continent = oceania
							has_global_flag = primary_oceania
						}
						AND = {
							continent = russia_anarchy
							has_global_flag = primary_russia_anarchy
						}
					}
				}
				#nuke heavy
				set_province_flag = disease

				remove_province_modifier = nuke_heavy_2
				add_province_modifier = {
					name = nuke_heavy_2
					duration = 3650
				}
			}
			any_owned = {
				limit = {
					total_pops = 100000
					OR = {
						AND = {
							continent = europe
							has_global_flag = primary_europe
						}
						AND = {
							continent = asia
							has_global_flag = primary_asia
						}
						AND = {
							continent = middle_east
							has_global_flag = primary_middle_east
						}
						AND = {
							continent = central_asia
							has_global_flag = primary_central_asia
						}
						AND = {
							continent = africa
							has_global_flag = primary_africa
						}
						AND = {
							continent = north_america
							has_global_flag = primary_north_america
						}
						AND = {
							continent = south_america
							has_global_flag = primary_south_america
						}
						AND = {
							continent = oceania
							has_global_flag = primary_oceania
						}
						AND = {
							continent = russia_anarchy
							has_global_flag = primary_russia_anarchy
						}
					}
				}
				#nuke heavy
				set_province_flag = disease

				remove_province_modifier = nuke_heavy_1
				add_province_modifier = {
					name = nuke_heavy_1
					duration = 3650
				}
			}

			#primary neighboring continent
			any_owned = {
				limit = {
					total_pops = 100000
					has_province_modifier = nuke_medium_2
					OR = {
						AND = {
							continent = europe
							NOT = {has_global_flag = primary_europe}
							OR = {
								has_global_flag = primary_middle_east
								has_global_flag = primary_africa
								has_global_flag = primary_russia_anarchy
							}
						}
						AND = {
							continent = asia
							NOT = {has_global_flag = primary_asia}
							OR = {
								has_global_flag = primary_russia_anarchy
								has_global_flag = primary_oceania
								has_global_flag = primary_central_asia
							}
						}
						AND = {
							continent = middle_east
							NOT = {has_global_flag = primary_middle_east}
							OR = {
								has_global_flag = primary_central_asia
								has_global_flag = primary_africa
								has_global_flag = primary_europe
							}
						}
						AND = {
							continent = central_asia
							NOT = {has_global_flag = primary_central_asia}
							OR = {
								has_global_flag = primary_middle_east
								has_global_flag = primary_russia_anarchy
								has_global_flag = primary_asia
							}
						}
						AND = {
							continent = africa
							NOT = {has_global_flag = primary_africa}
							OR = {
								has_global_flag = primary_middle_east
								has_global_flag = primary_europe
							}
						}
						AND = {
							continent = north_america
							NOT = {has_global_flag = primary_north_america}
							OR = {
								has_global_flag = primary_south_america
								has_global_flag = primary_oceania
							}
						}
						AND = {
							continent = south_america
							NOT = {has_global_flag = primary_south_america}
							OR = {
								has_global_flag = primary_north_america
								has_global_flag = primary_oceania
							}
						}
						AND = {
							continent = oceania
							NOT = {has_global_flag = primary_oceania}
							OR = {
								has_global_flag = primary_north_america
								has_global_flag = primary_south_america
								has_global_flag = primary_asia
							}
						}
						AND = {
							continent = russia_anarchy
							NOT = {has_global_flag = primary_russia_anarchy}
							OR = {
								has_global_flag = primary_central_asia
								has_global_flag = primary_asia
								has_global_flag = primary_europe
							}
						}
					}
				}
				#nuke medium
				set_province_flag = disease

				remove_province_modifier = nuke_medium_3
				remove_province_modifier = nuke_medium_2
				add_province_modifier = {
					name = nuke_medium_3
					duration = 3650
				}
				add_province_modifier = {
					name = nuke_medium_2
					duration = 3650
				}
			}
			any_owned = {
				limit = {
					total_pops = 100000
					has_province_modifier = nuke_medium_1
					OR = {
						AND = {
							continent = europe
							NOT = {has_global_flag = primary_europe}
							OR = {
								has_global_flag = primary_middle_east
								has_global_flag = primary_africa
								has_global_flag = primary_russia_anarchy
							}
						}
						AND = {
							continent = asia
							NOT = {has_global_flag = primary_asia}
							OR = {
								has_global_flag = primary_russia_anarchy
								has_global_flag = primary_oceania
								has_global_flag = primary_central_asia
							}
						}
						AND = {
							continent = middle_east
							NOT = {has_global_flag = primary_middle_east}
							OR = {
								has_global_flag = primary_central_asia
								has_global_flag = primary_africa
								has_global_flag = primary_europe
							}
						}
						AND = {
							continent = central_asia
							NOT = {has_global_flag = primary_central_asia}
							OR = {
								has_global_flag = primary_middle_east
								has_global_flag = primary_russia_anarchy
								has_global_flag = primary_asia
							}
						}
						AND = {
							continent = africa
							NOT = {has_global_flag = primary_africa}
							OR = {
								has_global_flag = primary_middle_east
								has_global_flag = primary_europe
							}
						}
						AND = {
							continent = north_america
							NOT = {has_global_flag = primary_north_america}
							OR = {
								has_global_flag = primary_south_america
								has_global_flag = primary_oceania
							}
						}
						AND = {
							continent = south_america
							NOT = {has_global_flag = primary_south_america}
							OR = {
								has_global_flag = primary_north_america
								has_global_flag = primary_oceania
							}
						}
						AND = {
							continent = oceania
							NOT = {has_global_flag = primary_oceania}
							OR = {
								has_global_flag = primary_north_america
								has_global_flag = primary_south_america
								has_global_flag = primary_asia
							}
						}
						AND = {
							continent = russia_anarchy
							NOT = {has_global_flag = primary_russia_anarchy}
							OR = {
								has_global_flag = primary_central_asia
								has_global_flag = primary_asia
								has_global_flag = primary_europe
							}
						}
					}
				}
				#nuke medium
				set_province_flag = disease

				remove_province_modifier = nuke_medium_2
				add_province_modifier = {
					name = nuke_medium_2
					duration = 3650
				}
			}
			any_owned = {
				limit = {
					total_pops = 100000
					OR = {
						AND = {
							continent = europe
							NOT = {has_global_flag = primary_europe}
							OR = {
								has_global_flag = primary_middle_east
								has_global_flag = primary_africa
								has_global_flag = primary_russia_anarchy
							}
						}
						AND = {
							continent = asia
							NOT = {has_global_flag = primary_asia}
							OR = {
								has_global_flag = primary_russia_anarchy
								has_global_flag = primary_oceania
								has_global_flag = primary_central_asia
							}
						}
						AND = {
							continent = middle_east
							NOT = {has_global_flag = primary_middle_east}
							OR = {
								has_global_flag = primary_central_asia
								has_global_flag = primary_africa
								has_global_flag = primary_europe
							}
						}
						AND = {
							continent = central_asia
							NOT = {has_global_flag = primary_central_asia}
							OR = {
								has_global_flag = primary_middle_east
								has_global_flag = primary_russia_anarchy
								has_global_flag = primary_asia
							}
						}
						AND = {
							continent = africa
							NOT = {has_global_flag = primary_africa}
							OR = {
								has_global_flag = primary_middle_east
								has_global_flag = primary_europe
							}
						}
						AND = {
							continent = north_america
							NOT = {has_global_flag = primary_north_america}
							OR = {
								has_global_flag = primary_south_america
								has_global_flag = primary_oceania
							}
						}
						AND = {
							continent = south_america
							NOT = {has_global_flag = primary_south_america}
							OR = {
								has_global_flag = primary_north_america
								has_global_flag = primary_oceania
							}
						}
						AND = {
							continent = oceania
							NOT = {has_global_flag = primary_oceania}
							OR = {
								has_global_flag = primary_north_america
								has_global_flag = primary_south_america
								has_global_flag = primary_asia
							}
						}
						AND = {
							continent = russia_anarchy
							NOT = {has_global_flag = primary_russia_anarchy}
							OR = {
								has_global_flag = primary_central_asia
								has_global_flag = primary_asia
								has_global_flag = primary_europe
							}
						}
					}
				}
				#nuke medium
				set_province_flag = disease

				remove_province_modifier = nuke_medium_1
				add_province_modifier = {
					name = nuke_medium_1
					duration = 3650
				}
			}

			#secondary same continent
			any_owned = {
				limit = {
					total_pops = 100000
					has_province_modifier = nuke_medium_2
					OR = {
						AND = {
							continent = europe
							has_global_flag = secondary_europe
						}
						AND = {
							continent = asia
							has_global_flag = secondary_asia
						}
						AND = {
							continent = middle_east
							has_global_flag = secondary_middle_east
						}
						AND = {
							continent = central_asia
							has_global_flag = secondary_central_asia
						}
						AND = {
							continent = africa
							has_global_flag = secondary_africa
						}
						AND = {
							continent = north_america
							has_global_flag = secondary_north_america
						}
						AND = {
							continent = south_america
							has_global_flag = secondary_south_america
						}
						AND = {
							continent = oceania
							has_global_flag = secondary_oceania
						}
						AND = {
							continent = russia_anarchy
							has_global_flag = secondary_russia_anarchy
						}
					}
				}
				#nuke medium
				set_province_flag = disease

				remove_province_modifier = nuke_medium_3
				remove_province_modifier = nuke_medium_2
				add_province_modifier = {
					name = nuke_medium_3
					duration = 3650
				}
				add_province_modifier = {
					name = nuke_medium_2
					duration = 3650
				}
			}
			any_owned = {
				limit = {
					total_pops = 100000
					has_province_modifier = nuke_medium_1
					OR = {
						AND = {
							continent = europe
							has_global_flag = secondary_europe
						}
						AND = {
							continent = asia
							has_global_flag = secondary_asia
						}
						AND = {
							continent = middle_east
							has_global_flag = secondary_middle_east
						}
						AND = {
							continent = central_asia
							has_global_flag = secondary_central_asia
						}
						AND = {
							continent = africa
							has_global_flag = secondary_africa
						}
						AND = {
							continent = north_america
							has_global_flag = secondary_north_america
						}
						AND = {
							continent = south_america
							has_global_flag = secondary_south_america
						}
						AND = {
							continent = oceania
							has_global_flag = secondary_oceania
						}
						AND = {
							continent = russia_anarchy
							has_global_flag = secondary_russia_anarchy
						}
					}
				}
				#nuke medium
				set_province_flag = disease

				remove_province_modifier = nuke_medium_2
				add_province_modifier = {
					name = nuke_medium_2
					duration = 3650
				}
			}
			any_owned = {
				limit = {
					total_pops = 100000
					OR = {
						AND = {
							continent = europe
							has_global_flag = secondary_europe
						}
						AND = {
							continent = asia
							has_global_flag = secondary_asia
						}
						AND = {
							continent = middle_east
							has_global_flag = secondary_middle_east
						}
						AND = {
							continent = central_asia
							has_global_flag = secondary_central_asia
						}
						AND = {
							continent = africa
							has_global_flag = secondary_africa
						}
						AND = {
							continent = north_america
							has_global_flag = secondary_north_america
						}
						AND = {
							continent = south_america
							has_global_flag = secondary_south_america
						}
						AND = {
							continent = oceania
							has_global_flag = secondary_oceania
						}
						AND = {
							continent = russia_anarchy
							has_global_flag = secondary_russia_anarchy
						}
					}
				}
				#nuke medium
				set_province_flag = disease

				remove_province_modifier = nuke_medium_1
				add_province_modifier = {
					name = nuke_medium_1
					duration = 3650
				}
			}

			#secondary neighboring continent
			any_owned = {
				limit = {
					total_pops = 100000
					has_province_modifier = nuke_light_2
					OR = {
						AND = {
							continent = europe
							NOT = {has_global_flag = secondary_europe}
							OR = {
								has_global_flag = secondary_middle_east
								has_global_flag = secondary_africa
								has_global_flag = secondary_russia_anarchy
							}
						}
						AND = {
							continent = asia
							NOT = {has_global_flag = secondary_asia}
							OR = {
								has_global_flag = secondary_russia_anarchy
								has_global_flag = secondary_oceania
								has_global_flag = secondary_central_asia
							}
						}
						AND = {
							continent = middle_east
							NOT = {has_global_flag = secondary_middle_east}
							OR = {
								has_global_flag = secondary_central_asia
								has_global_flag = secondary_africa
								has_global_flag = secondary_europe
							}
						}
						AND = {
							continent = central_asia
							NOT = {has_global_flag = secondary_central_asia}
							OR = {
								has_global_flag = secondary_middle_east
								has_global_flag = secondary_russia_anarchy
								has_global_flag = secondary_asia
							}
						}
						AND = {
							continent = africa
							NOT = {has_global_flag = secondary_africa}
							OR = {
								has_global_flag = secondary_middle_east
								has_global_flag = secondary_europe
							}
						}
						AND = {
							continent = north_america
							NOT = {has_global_flag = secondary_north_america}
							OR = {
								has_global_flag = secondary_south_america
								has_global_flag = secondary_oceania
							}
						}
						AND = {
							continent = south_america
							NOT = {has_global_flag = secondary_south_america}
							OR = {
								has_global_flag = secondary_north_america
								has_global_flag = secondary_oceania
							}
						}
						AND = {
							continent = oceania
							NOT = {has_global_flag = secondary_oceania}
							OR = {
								has_global_flag = secondary_north_america
								has_global_flag = secondary_south_america
								has_global_flag = secondary_asia
							}
						}
						AND = {
							continent = russia_anarchy
							NOT = {has_global_flag = secondary_russia_anarchy}
							OR = {
								has_global_flag = secondary_central_asia
								has_global_flag = secondary_asia
								has_global_flag = secondary_europe
							}
						}
					}
				}
				#nuke light
				set_province_flag = disease

				remove_province_modifier = nuke_light_3
				remove_province_modifier = nuke_light_2
				add_province_modifier = {
					name = nuke_light_3
					duration = 3650
				}
				add_province_modifier = {
					name = nuke_light_2
					duration = 3650
				}
			}
			any_owned = {
				limit = {
					total_pops = 100000
					has_province_modifier = nuke_light_1
					OR = {
						AND = {
							continent = europe
							NOT = {has_global_flag = secondary_europe}
							OR = {
								has_global_flag = secondary_middle_east
								has_global_flag = secondary_africa
								has_global_flag = secondary_russia_anarchy
							}
						}
						AND = {
							continent = asia
							NOT = {has_global_flag = secondary_asia}
							OR = {
								has_global_flag = secondary_russia_anarchy
								has_global_flag = secondary_oceania
								has_global_flag = secondary_central_asia
							}
						}
						AND = {
							continent = middle_east
							NOT = {has_global_flag = secondary_middle_east}
							OR = {
								has_global_flag = secondary_central_asia
								has_global_flag = secondary_africa
								has_global_flag = secondary_europe
							}
						}
						AND = {
							continent = central_asia
							NOT = {has_global_flag = secondary_central_asia}
							OR = {
								has_global_flag = secondary_middle_east
								has_global_flag = secondary_russia_anarchy
								has_global_flag = secondary_asia
							}
						}
						AND = {
							continent = africa
							NOT = {has_global_flag = secondary_africa}
							OR = {
								has_global_flag = secondary_middle_east
								has_global_flag = secondary_europe
							}
						}
						AND = {
							continent = north_america
							NOT = {has_global_flag = secondary_north_america}
							OR = {
								has_global_flag = secondary_south_america
								has_global_flag = secondary_oceania
							}
						}
						AND = {
							continent = south_america
							NOT = {has_global_flag = secondary_south_america}
							OR = {
								has_global_flag = secondary_north_america
								has_global_flag = secondary_oceania
							}
						}
						AND = {
							continent = oceania
							NOT = {has_global_flag = secondary_oceania}
							OR = {
								has_global_flag = secondary_north_america
								has_global_flag = secondary_south_america
								has_global_flag = secondary_asia
							}
						}
						AND = {
							continent = russia_anarchy
							NOT = {has_global_flag = secondary_russia_anarchy}
							OR = {
								has_global_flag = secondary_central_asia
								has_global_flag = secondary_asia
								has_global_flag = secondary_europe
							}
						}
					}
				}
				#nuke light
				set_province_flag = disease

				remove_province_modifier = nuke_light_2
				add_province_modifier = {
					name = nuke_light_2
					duration = 3650
				}
			}
			any_owned = {
				limit = {
					total_pops = 100000
					OR = {
						AND = {
							continent = europe
							NOT = {has_global_flag = secondary_europe}
							OR = {
								has_global_flag = secondary_middle_east
								has_global_flag = secondary_africa
								has_global_flag = secondary_russia_anarchy
							}
						}
						AND = {
							continent = asia
							NOT = {has_global_flag = secondary_asia}
							OR = {
								has_global_flag = secondary_russia_anarchy
								has_global_flag = secondary_oceania
								has_global_flag = secondary_central_asia
							}
						}
						AND = {
							continent = middle_east
							NOT = {has_global_flag = secondary_middle_east}
							OR = {
								has_global_flag = secondary_central_asia
								has_global_flag = secondary_africa
								has_global_flag = secondary_europe
							}
						}
						AND = {
							continent = central_asia
							NOT = {has_global_flag = secondary_central_asia}
							OR = {
								has_global_flag = secondary_middle_east
								has_global_flag = secondary_russia_anarchy
								has_global_flag = secondary_asia
							}
						}
						AND = {
							continent = africa
							NOT = {has_global_flag = secondary_africa}
							OR = {
								has_global_flag = secondary_middle_east
								has_global_flag = secondary_europe
							}
						}
						AND = {
							continent = north_america
							NOT = {has_global_flag = secondary_north_america}
							OR = {
								has_global_flag = secondary_south_america
								has_global_flag = secondary_oceania
							}
						}
						AND = {
							continent = south_america
							NOT = {has_global_flag = secondary_south_america}
							OR = {
								has_global_flag = secondary_north_america
								has_global_flag = secondary_oceania
							}
						}
						AND = {
							continent = oceania
							NOT = {has_global_flag = secondary_oceania}
							OR = {
								has_global_flag = secondary_north_america
								has_global_flag = secondary_south_america
								has_global_flag = secondary_asia
							}
						}
						AND = {
							continent = russia_anarchy
							NOT = {has_global_flag = secondary_russia_anarchy}
							OR = {
								has_global_flag = secondary_central_asia
								has_global_flag = secondary_asia
								has_global_flag = secondary_europe
							}
						}
					}
				}
				#nuke light
				set_province_flag = disease

				remove_province_modifier = nuke_light_1
				add_province_modifier = {
					name = nuke_light_1
					duration = 3650
				}
			}
		}

		clr_global_flag = primary_europe
		clr_global_flag = primary_asia
		clr_global_flag = primary_middle_east
		clr_global_flag = primary_central_asia
		clr_global_flag = primary_africa
		clr_global_flag = primary_north_america
		clr_global_flag = primary_south_america
		clr_global_flag = primary_oceania
		clr_global_flag = primary_russia_anarchy

		clr_global_flag = secondary_europe
		clr_global_flag = secondary_asia
		clr_global_flag = secondary_middle_east
		clr_global_flag = secondary_central_asia
		clr_global_flag = secondary_africa
		clr_global_flag = secondary_north_america
		clr_global_flag = secondary_south_america
		clr_global_flag = secondary_oceania
		clr_global_flag = secondary_russia_anarchy

		clr_global_flag = hit_global_nukes

		any_country = {
			limit = {
				has_country_flag = enemy_leader
			}
			set_country_flag = response_leader
			clr_country_flag = enemy_leader
		}
		any_country = {
			limit = {
				has_country_flag = enemy_sphere
			}
			clr_country_flag = enemy_sphere
		}
		any_country = {
			limit = {
				has_country_flag = enemy_solo
			}
			set_country_flag = response_solo
			clr_country_flag = enemy_solo
		}

		any_country = {
			limit = {has_country_flag = response_leader NOT = {tag = REB}}
			clr_country_flag = response_leader
			country_event = 500245
		}

		any_country = {
			limit = {has_country_flag = response_solo NOT = {tag = REB}}
			clr_country_flag = response_solo
			country_event = 500245
		}
	}

	option = {
		name = "The horror!"
	}
}

country_event = {
	#ultimatum canceled
	id = 500257
	title = "Nuclear Launch Canceled"
	desc = "With the de-escalation of foreign intervention in the German Civil War the nuclear launch we were preparing was canceled."
	
	mean_time_to_happen = {
		days = 1
	}
	trigger = {
		has_country_flag = german_nuke
		NOT = {
			war_countries = {
				NOT = {
					OR = {
						tag = HGE
						tag = SGE
						tag = BGE
						tag = GGE
					}
				}
			}	
		}
	}
	immediate = {
		clr_country_flag = trying_to_nuke
		clr_country_flag = german_nuke
		remove_country_modifier = nuclear_threat
		remove_country_modifier = nuclear_countdown
	}
	option = {
		name = "Crisis adverted!"
	}
}
